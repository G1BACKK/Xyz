<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scratch Card - Pay ‚Çπ19.99</title>
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            background: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
        }

        .container {
            width: 380px;
            position: relative;
        }

        .scratch-area {
            position: relative;
            width: 100%;
            height: 500px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* Base Image (1st image) */
        #baseImage {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }

        /* Scratch Canvas (2nd image overlay) */
        #scratchCanvas {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 2;
            cursor: pointer;
        }

        /* Payment Bar at bottom */
        .payment-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            z-index: 3;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            border-top: 3px solid gold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-bar:hover {
            background: linear-gradient(45deg, #ff4b2b, #ff416c);
            height: 32%;
        }

        .payment-bar .price {
            font-size: 36px;
            font-weight: bold;
            margin: 5px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .payment-bar .small {
            font-size: 14px;
            background: rgba(0,0,0,0.3);
            padding: 5px 15px;
            border-radius: 20px;
        }

        .payment-bar .lock {
            font-size: 20px;
            margin-bottom: 5px;
        }

        .upi-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            color: #ff416c;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 4;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="scratch-area">
            <!-- UPI Badge -->
            <div class="upi-badge">‚ö° Paytm | GPay | PhonePe</div>
            
            <!-- Base Image (1st image - what you see after scratching) -->
            <img id="baseImage" src="https://files.catbox.moe/kgnkui.jpeg" alt="Base Image">
            
            <!-- Scratch Canvas (shows 2nd image as overlay) -->
            <canvas id="scratchCanvas"></canvas>
            
            <!-- Payment Bar (click to pay) -->
            <div class="payment-bar" onclick="tryRedirectUPI()">
                <div class="lock">üîí</div>
                <div class="price">‚Çπ19.99</div>
                <div class="small">tap to pay & view full image</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('scratchCanvas');
        const ctx = canvas.getContext('2d');
        const baseImage = document.getElementById('baseImage');
        
        // Set canvas size
        canvas.width = 380;
        canvas.height = 500;
        
        // Load overlay image (2nd image)
        const overlayImage = new Image();
        overlayImage.crossOrigin = "Anonymous";
        overlayImage.src = "https://files.catbox.moe/mzu5hi.jpeg";
        
        overlayImage.onload = function() {
            // Draw overlay image with blur
            ctx.filter = 'blur(8px)';
            ctx.drawImage(overlayImage, 0, 0, canvas.width, canvas.height);
            ctx.filter = 'none';
            
            // Add slight scratch texture
            ctx.fillStyle = 'rgba(255,255,255,0.1)';
            for(let i = 0; i < 100; i++) {
                ctx.fillRect(Math.random() * canvas.width, Math.random() * canvas.height * 0.7, 20, 2);
            }
        };
        
        // Scratch functionality
        let isScratching = false;
        let lastX, lastY;
        
        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
            const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
            return {
                x: (x / rect.width) * canvas.width,
                y: (y / rect.height) * canvas.height
            };
        }
        
        function startScratch(e) {
            e.preventDefault();
            const pos = getPos(e);
            
            // Only scratch in top 70%
            if (pos.y > canvas.height * 0.7) return;
            
            isScratching = true;
            lastX = pos.x;
            lastY = pos.y;
            
            ctx.globalCompositeOperation = 'destination-out';
            ctx.lineWidth = 30;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
        }
        
        function scratch(e) {
            e.preventDefault();
            if (!isScratching) return;
            
            const pos = getPos(e);
            
            // Stop if reaches bottom
            if (pos.y > canvas.height * 0.7) {
                isScratching = false;
                return;
            }
            
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            
            lastX = pos.x;
            lastY = pos.y;
        }
        
        function stopScratch() {
            isScratching = false;
            ctx.globalCompositeOperation = 'source-over';
        }
        
        // EXACT PAYMENT FUNCTION FROM YOUR CODE (with amount changed to 19.99)
        function tryRedirectUPI() {
            const pa = "gigablast.cf@axisbank";
            const pn = "";
            const tr = "";
            const tn = "";
            const am = "1999";  // Changed from "1" to "19.99"
            const cu = "INR";

            const urls = [
                `paytmmp://pay?pa=${pa}&pn=${pn}&tr=${tr}&tn=${tn}&am=${am}&cu=${cu}`,
                `gpay://upi/pay?pa=${pa}&pn=${pn}&tr=${tr}&tn=${tn}&am=${am}&cu=${cu}`,
                `phonepe://pay?pa=${pa}&pn=${pn}&tr=${tr}&tn=${tn}&am=${am}&cu=${cu}`
            ];

            let index = 0;

            function tryNext() {
                if (index >= urls.length) return;
                window.location.href = urls[index];
                index++;
                setTimeout(tryNext, 800);
            }

            tryNext();
        }
        
        // Event listeners
        canvas.addEventListener('mousedown', startScratch);
        canvas.addEventListener('mousemove', scratch);
        canvas.addEventListener('mouseup', stopScratch);
        canvas.addEventListener('mouseleave', stopScratch);
        
        canvas.addEventListener('touchstart', startScratch);
        canvas.addEventListener('touchmove', scratch);
        canvas.addEventListener('touchend', stopScratch);
        canvas.addEventListener('touchcancel', stopScratch);
        
        // Log when images load
        baseImage.onload = () => console.log('‚úÖ Base image loaded');
        baseImage.onerror = () => console.log('‚ùå Base image failed to load');
    </script>
</body>
</html>
